# Network Configuration for Multi-HRI System
# Unity & Python 공용
# 작성일: 2025-08-30
# 작성자: Dongjune Chang

# === Management App 설정 ===
app_server:
  ngrok_domain: "multi-hri.ngrok.app"
  flask_port: 5000
  github_repo: "DongjuneChang/multi-robot-ar-data"
  
  # ngrok 실행 명령 (참고용)
  # ngrok http 5000 --domain=multi-hri.ngrok.app
  # 또는 ngrok start --config=ngrok_config.yml flask-app

# === Riley AI/LLM 채널 ===
riley_config:
  wake_word: "Riley"
  listening_duration: 5.0
  
  # 연결 모드별 설정
  modes:
    zmq_local:  # 로컬 ZMQ 연결 (WSL2)
      type: "zmq"
      host: "localhost"
      publish_port: 5565    # Unity → Python (음성 명령)
      subscribe_port: 5566  # Python → Unity (LLM 응답)
      ollama_port: 11434
      model: "llama3.2:1b"
      
    zmq_remote:  # 원격 ZMQ 연결 (ROS 서버와 같은 머신)
      type: "zmq"
      host: "10.200.84.141"
      publish_port: 5565
      subscribe_port: 5566
      ollama_port: 11434
      model: "llama3.2:3b"
      
    http_ngrok:  # ngrok HTTP API (GPU 서버)
      type: "http"
      endpoint: "https://riley.multi-hri.ngrok.app"
      api_key: "optional_key"
      model: "llama3.2:70b"

# === 데이터 스트리밍 채널 ===
streaming_config:
  update_rate: 10  # Hz
  data_types:
    - user_pose      # 사용자 위치
    - qr_update      # QR 감지 이벤트
    - robot_spawn    # 로봇 스폰
    
  # 연결 모드별 설정
  modes:
    zmq_local:  # 로컬 스트리밍
      type: "zmq"
      host: "localhost"
      publish_port: 5567    # Unity → Python
      subscribe_port: 5568  # Python → Unity
      
    zmq_aggregator:  # 중앙 집계 서버
      type: "zmq"
      host: "stream.multi-hri.ngrok.app"
      publish_port: 5567
      subscribe_port: 5568
      
    websocket:  # WebSocket (미래 옵션)
      type: "websocket"
      endpoint: "wss://stream.multi-hri.ngrok.app"
      
    disabled:  # 스트리밍 비활성화
      type: "none"

# === Photon Fusion2 설정 ===
photon_config:
  app_id: "YOUR_PHOTON_APP_ID"  # 실제 App ID로 교체
  region: "us"  # us, asia, eu 등
  room_name: "MultiHRI-Room"
  max_players: 10

# === ROS2 설정 (Unity Robotics TCP Connector) ===
ros_config:
  # Unity ROSTCPConnector 설정
  servers:
    nchr_kuka:
      host: "10.200.84.141"
      port: 10000
      
    nchr_xarm5:
      host: "192.168.1.100"
      port: 10000

    home:
      host: "192.168.1.100"
      port: 10000
      
    chicago_home:
      host: "192.168.1.4"
      port: 10000
      
    localhost:
      host: "127.0.0.1"
      port: 10000

# === 디바이스별 설정 ===
# NOTE: 디바이스 설정은 device_config.yaml로 이동되었습니다
# network_config.yaml은 네트워크 엔드포인트 정의만 포함합니다

# === 타임아웃 설정 ===
timeouts:
  ros_connection: 5000
  riley_connection: 3000
  streaming_connection: 2000

# === Robot Visualization 설정 ===
# NOTE: VirtualTwin display is now controlled by:
# 1. UserLocation (on_site | remote) from device config above
# 2. On-site users: Dialog on spawn + voice toggle ("Riley, Show/Hide Virtual Twin")
# 3. Remote users: Always shown
visualization: {}  # Placeholder (no settings needed)