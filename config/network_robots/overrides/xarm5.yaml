# xArm5 Robot Override Configuration
# 이 파일의 값이 _defaults.yaml을 덮어씀

robot:
  model: "xarm5"
  manufacturer: "UFACTORY"
  dof: 5
  prefab_name: "xarm5_1305"

joints:
  names: ["joint1", "joint2", "joint3", "joint4", "joint5"]
  positions:
    zero: [0, 0, 0, 0, 0]
    home: [0, 0, 0, 0, 0]  # xarm5 home = zero
  limits:
    joint1: [-360, 360]
    joint2: [-118, 120]
    joint3: [-225, 11]
    joint4: [-360, 360]
    joint5: [-360, 360]

frame_hierarchy:
  network_frames:
    "{robot_id}_base":
      ros_frame: "link_base"
    "{robot_id}_eef":
      ros_frame: "link_eef"
  local_frames:
    - "link1"
    - "link2"
    - "link3"
    - "link4"
    - "link5"

ros2:
  prefab_links:
    link_base: "Base"
    link_eef: "EndEffector"
    link1: "Link1"
    link2: "Link2"
    link3: "Link3"
    link4: "Link4"
    link5: "Link5"

  external_frames:
    WorkFrame:
      parent: "link_base"

  subscribe_frames:
    - "world"
    - "robot_origin"
    - "link_base"
    - "link_eef"
    - "WorkFrame"
    - "link1"
    - "link2"
    - "link3"
    - "link4"
    - "link5"

named_frames:
  frames:
    robot_origin:
      position: [0.207, 0.0, 0.112]  # FK at zero config
    WorkFrame:
      position: [0.143, 0.0, 0.15]   # 14.3cm forward, 15cm up

visualization_config: "xarm5_visualization"

# =============================================================================
# Control Configuration
# =============================================================================
control:
  type: "moveit"  # MoveIt2로 제어

  relay:
    actions:
      follow_joint_trajectory:
        from: "/{robot_id}/xarm5_traj_controller/follow_joint_trajectory"
        to: "/xarm5_traj_controller/follow_joint_trajectory"

    services:
      compute_ik:
        from: "/{robot_id}/compute_ik"
        to: "/compute_ik"
      compute_fk:
        from: "/{robot_id}/compute_fk"
        to: "/compute_fk"

    topics:
      joint_states:
        from: "/{robot_id}/joint_states"
        to: "/joint_states"
        direction: "bidirectional"

moveit:
  controller_name: "xarm5_traj_controller"
  move_group: "xarm5"

ros2_visualization:
  reference_frame: "link_base"
